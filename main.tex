% Possï¿½veis TODO
% - linkar as seï¿½ï¿½es de pesq ï¿½ seï¿½ï¿½o histï¿½rica
\documentclass[a4paper,titlepage]{article}
\usepackage[latin1]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[portuges]{babel}
% setspace - \doublespace \onehalfspace
% fullpage - ??
\usepackage{verbatim,url}
\usepackage[dvips]{graphicx}
\usepackage[bf]{subfigure}
\usepackage[bf]{caption}
\usepackage{amsmath, amssymb, algorithm, algorithmic,fullpage,setspace}
\usepackage{mathtools,empheq}
\usepackage[pagebackref=true,breaklinks=true,letterpaper=true,colorlinks,bookmarks=false]{hyperref}
\usepackage{multirow}
\usepackage{xspace}
\usepackage{array}

\newtheorem{definition}{Definiï¿½ï¿½o}
\newtheorem{theorem}{Teorema}
\newtheorem{notation}{Notaï¿½ï¿½o}
\floatname{algorithm}{Algoritmo}

\newenvironment{changemargin}[2]{\begin{list}{}{
   \setlength{\topsep}{0pt}\setlength{\leftmargin}{0pt}
   \setlength{\rightmargin}{0pt}
   \setlength{\listparindent}{\parindent}
   \setlength{\itemindent}{\parindent} \setlength{\parsep}{0pt plus 1pt}
   \addtolength{\leftmargin}{#1}\addtolength{\rightmargin}{#2}
}\item }{\end{list}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% You have many versions of the macro \draftnote{My note}. 
% The first version puts notes (My note in the example)
% into the margin. The others insert within the document. 
% Toggle the empty definitions to hide all draft notes.

\newcommand{\draftnote}[1]{\marginpar{\tiny\raggedright\textsf{\hspace{0pt}#1}}}
%\newcommand{\draftnote}[1]{}
%
% This one is just for the comments for in-line text.
\newcommand{\indraftnote}[1]{\textcolor{blue}{\texttt{\footnotesize [#1]}}}
%\newcommand{\indraftnote}[1]{}

\newcommand{\todo}[1]{\indraftnote{todo: #1}}
%\newcommand{\todo}[1]{}
\usepackage{listings} % better verbatim env for sketching outlines/lists
\lstset{
basicstyle=\small,
columns=flexible,
breaklines=true
}

% Uncomment to eliminate draft text
\lstnewenvironment{draft}{ } { }
%\newenvironment{draft} {\expandafter\comment} {\expandafter\endcomment}   % Empty 

\newcommand{\scilab}{\textsc{Scilab}}
\newcommand{\matlab}{\textsc{Matlab}}
\newcommand{\sip}{SIP}
\newcommand{\animal}{AnImaL}
\newcommand{\eg}{{p.\ ex.}}
\newcommand{\etc}{{\it etc}}
\newcommand{\ie}{{\it i.e.}}
\newcommand{\etal}{{\it et al.}}
\newcommand{\id}{\text{\emph{Id}}}
\newcommand{\dof}{\textsc{dof}}
\newcommand{\ransac}{\textsc{ransac}}
\newcommand{\sift}{\textsc{sift}}
\newcommand{\svd}{\textsc{svd}}
\newcommand{\sfm}{\textsc{sfm}}

\newcommand{\Gama}{\boldsymbol{\Gamma}}
\newcommand{\gama}{\boldsymbol{\gamma}}
\newcommand{\bsigma}{\boldsymbol{\sigma}}
%\newcommand{\Gama}{\Gamma}
%\newcommand{\gama}{\gamma}
\newcommand{\T}{\boldsymbol{T}}
\newcommand{\N}{\mathbf{N}}
\newcommand{\NSurface}{\mathbf{N}}
\newcommand{\Nlocal}{\overline{\N}} % normal in local coordinates
\newcommand{\balpha}{\boldsymbol{\alpha}}
\newcommand{\tDt}{t+\Delta t}
\newcommand{\bpsi}{\boldsymbol{\boldsymbol{\psi}}}
\newcommand{\bp}{\mathbf p}
\newcommand{\deldt}[1]{\frac{\partial#1}{\partial t}}
\newcommand{\ddt}[1]{\frac{d #1}{dt}}
\newcommand{\delds}[1]{\frac{\partial#1}{\partial s}}
\newcommand{\mybar}[1]{\overline{#1}}
\newcommand{\norm}[1]{\|#1\|}
\newcommand{\I}{\mathbf{I}}
\newcommand{\brho}{\boldsymbol{\rho}}
\newcommand{\lightrgb}{\boldsymbol{l}}
\newcommand{\B}{\boldsymbol{B}}
\renewcommand{\t}{\boldsymbol{t}}
\newcommand{\n}{\boldsymbol{n}}
\renewcommand{\b}{\boldsymbol{b}}
\newcommand{\e}{\boldsymbol{e}}
\newcommand{\f}{\boldsymbol{e}_3}
\newcommand{\ff}{\mathbf{f}}
\newcommand{\hf}{\boldsymbol{\hat{f}}}
\newcommand{\g}{\boldsymbol{g}}
\newcommand{\G}{\boldsymbol{G}}
\newcommand{\bc}{\boldsymbol{c}}
\newcommand{\Curve}{\Gamma}
%\newcommand{\X}{\boldsymbol{X}}
%\newcommand{\x}{\boldsymbol{x}}
\newcommand{\X}{\mathbf{X}}
\newcommand{\x}{\mathbf{x}}
\newcommand{\tilx}{\tilde x}
\newcommand{\tily}{\tilde y}
\newcommand{\tilgama}{\tilde \gama}
\newcommand{\ugama}{\hat{\gama}} %unit gama
\newcommand{\br}{\bar r}
\newcommand{\Kc}{\mathbf K_c}
\newcommand{\Kim} {\mathcal K_{im}}
\newcommand{\lepi}{\mathbf r}
\newcommand{\itan}{\tan^{-1}}
\newcommand{\uu}{\xi}
\newcommand{\buu}{\bar \uu}
\newcommand{\bvv}{\bar \vv}
\newcommand{\vv}{\eta}
\newcommand{\VV}{\mathbf{V}} % translational velocity
\newcommand{\VVspeed}{V} % translational velocity
\newcommand{\field}{\boldsymbol\chi}
\newcommand{\ufield}{\hat{\boldsymbol{\chi}}}
\newcommand{\fieldc}{\chi} % field component
\newcommand{\transl}{\mathcal{T}}
\newcommand{\rot}{\mathcal{R}}
\newcommand{\albedo}{\alpha}
\newcommand{\depth}{\rho}      % depth as z
\newcommand{\udepth}{{\hat{\rho}}} % depth along ray
\newcommand{\ttransl}{\T} % translation tangent
\newcommand{\surface}{\mathcal{M}} % surface/manifold
\newcommand{\surf}{\mathcal{M}} % surface/manifold short
\newcommand{\jacm}{\mathtt{J}} % Jacobian matrix
\newcommand{\xbar}{\bar x}
\newcommand{\ybar}{\bar y}
\newcommand{\zbar}{\bar z}

\newcommand{\bdelta}{\boldsymbol \delta}
%\newcommand{\X}{\boldsymbol{X}}
%\newcommand{\x}{\boldsymbol{x}}
%\newcommand{\X}{\mathbf{X}}
%\newcommand{\x}{\mathbf{x}}
\newcommand{\boldu}{\mathbf{u}}
\newcommand{\boldv}{\mathbf{v}}
\newcommand{\boldw}{\mathbf{w}}
\newcommand{\tgtveloc}{\tilde\alpha} % real tangential velocity
\newcommand{\mccn}{\textsc{mccn}\xspace}

\newcommand{\argmin}{\operatornamewithlimits{argmin}}
\newcommand{\argmax}{\operatornamewithlimits{argmax}}
\newcommand{\avg}{\operatornamewithlimits{avg}}

\begin{document}

\input{titlepage}

%\tableofcontents
%\contentsline {section}{Refer\^{e}ncias}{16}
%\newpage
%\doublespacing
%\onehalfspacing
%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% TODO  TODO TODO 
%  - italico em spots e sub-arrays
%  - XXX
%  - @@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 

\section{Contextualização}

O presente plano de pesquisa se refere a atividades propostas para a aluna
Juliana Ventura, a serem realizadas a nível de doutorado no Instituto
Politécnico -- IPRJ/UERJ, Departamento de Modelagem Computacional.
Pretende-se trabalhar em conjunto com dois orientadores, os quais seriam prof.\
Ricardo Fabbri, do laboratório de visualização, e o prof.\ Francisco Duarte
Moura Neto, do laboratório de tecnologia da informação (LTI), juntando-se os
aspectos ativos recentemente das pesquisas de ambos. Pretende-se trabalhar em
conjunto com outros grupos de pesquisa além desses dois laboratórios dentro do
IPRJ, bem como outros pesquisadores no IMPA e em outras instituiçõs em
colaboração internacional na realização de projetos e publicação de artigos.
Dentre as instituições internacional envolvidas, tem-se: Brown University,
University of Liverpool, Notre Dame University, Georgia Tech, Czech Technical
University, e General Motors Research.

\section{Introdução}


Na presente década está-se presenciando um nível de investimentos sem
precedentes em ecosistemas de tecnologia para modelagem 3D de fenômenos
usando-se múltiplas imagens adquiridas por uma câmera em diferentes posições,
múltiplas câmeras, ou vídeo~\cite{AppleKeynote:2018}. % A Expand here on explicit applications and citations
% - mention concrete appso ok
% - mention hot techs that have been developed, then link to next sentence
Esse impacto cada vez maior da visão computacional 3D se deve em grande parte a
tecnologias de \emph{structre from motion} (SfM) desenvolvidas na década
passada, a qual possibilitou novas ferramentas para resolver problemas chave de
forma robusta e automática. No entanto, o vasto potencial das tecnologias 3D
permanece ainda inexplorado, em parte devido à rentabilidade de aplicações mais
simples e imediatas, e em parte devido a limitações da tecnologia evidentes
na medida em que aplicativos práticos são desenvolvidos, como realidade
aumentada~\cite{AppleKeynote:2018}. Pode-se afirmar que tais limitações se devem
em três problemas centrais: o uso de geometria projetiva clássica de pontos, sem 
a geometria diferencial necessária para modelar estruturas mais gerais; o uso
sub-ótimo de múltiplas imagens; e a necessidade de models 3D mais
estruturados.

O grupo de pesquisa do prof.\ Ricardo Fabbri tem tradição em um novo paradigma
fotogramétrico para a reconstrução 3D de objetos rígidos e não-rígidos a partir
de múltiplas imagens e
vídeo~\cite{Fabbri:Kimia:IJCV2016,Fabbri:PhD:2010,Fabbri:Giblin:Kimia:ECCV12,Fabbri:Kimia:EMMCVPR2005,Fabbri:Kimia:CVPR10,Usumezbas:Fabbri:Kimia:CVPR:2017,Usumezbas:Fabbri:Kimia:ECCV16}.
A pesquisa do prof.\ Fabbri tem como objetivo suplantar as limitações
supracitadas da tecnologia usual de reconstrução 3D, a qual é baseada em (e
limitada por) pontos de interesse. Uma das formas para se atingir esse objetivo
é empregando-se a informação disponível em curvas perceptuais em imagens,
através de um modelo 3D com progressivos níveis de detalhes baseado no chamado
\emph{3D curve sketch} (esboço 3D de curvas) e o \emph{3D curve drawing}
(desenho 3D de curvas). Tendo obtido um esboço inicial dos objetos 3D através do
casamento de curvas ao longo das múltiplas imagens, o modelo 3D pode ser
refinado em um grafo de curvas, similar a um desenho 3D. Superfícies podem ser
estendidas sobre esse desenho 3D para gerar uma reconstrução detalhada e
robusta a iluminação. Além da proposta do paradigma baseado em curvas, prof.\
Fabbri e colaboradores foram os primeiros a introduzir a ténica
CAD chamada Lofting à visão computacional em uma versão automática.

Este projeto objetiva unir a pesquisa em aprendizagem de máquina baseada em
difusão em grafos -- proveniente da
colaboração entre os orientadores prof.\ Ricardo Fabbri e prof.\ Francisco
Duarte Moura neto --  com a pesquisa específica em reconstrução 3D do prof.\
Fabbri, visando melhores algoritmos para inicializar modelos de câmera e de
objetos curvilíneos com pouca textura. A ideia principal é capitalizar nos
avanços recentes e de alto impacto realizados pelo prof.\ Fabbri durante sua
estadia no ICERM / Brown University, ao final de 2018 e no início de 2019 como
organizador do Research Cluster em ``Visão Algébrica'', reunindo os melhores
professores visitantes e seus alunos de doutorado. No início de 2019, o grupo
organizado pelo prof.\
Fabbri conseguiu levar consigo o ex-aluno de mestrado do IPRJ David da Costa de
Pinho, e sua tese de mestrado desenvolvida no IPRJ teve grandes desdobramentos.
Este projeto tambem almeja captalizar no sucesso e grande interesse demonstrado
pela comunidade internacional nesta dissertação de mestrado do aluno do IPRJ.
Apesar dos problemas algébricos locais terem sofrido grande avanço durante a
estadia de David e Fabbri no ICERM/Brown University, ainda restam dois problemas
chave: 1) como encontrar o melhor problema inicial para aumentar a velocidade da
continuação homotópica para calcular configurações de três câmeras para novas
imagens, e 2) como integrar a informação local para se utilizar a estrutura
global de curvas.

Com o acabouço de aprendizagem de máquina trabalhado entre os prof.\ Fabbri e
prof.\ Moura Neto nos últios anos, que envolve difusão em grafos e Teoria de
Padrões, é possível no problema 1) treinar um mapa
entre as entradas de três pontos-tangentes em curvas e os 11 graus de liberdade
de soluções iniciais para a escrita de um \emph{solver} rápido por continuação
homotópica, realizando aprendizagem com sistemas dinâmicos de soluções
algébricas; e 2) realizar a estimativa inicial de um sistema de câmeras a partir
de três imagens, explorando-se a estrutura global de curvas. O uso de três
imagens fornece uma dimensionalidade e estrutura interessante: equações bem
definidas, estrutura de curvas em duas e três dimensões, bem como um espaço de
11 dimensões descrevendo três câmeras. Apenas duas imagens não
permitiria o uso de estruturas curvilíneas para a estimação de câmeras, e o estudo
de mais de três imagens cai em problemas genéricos de aprendizagem e otimização
e intratabilidade, com pouca robustez. Mais detalhes são fornecidos a seguir.



\section{Multiview Reconstruction of the 3D Curve Drawing}
This section summarizes our prior work on recovering the scene curve structure,
the \textbf{3D curve drawing}, from image curves in multiple calibrated views
with known pose. The mathematical foundation is presented
in~\cite{fabbri2016multiview} relating the differential properties of a 3D curve
$\Gamma(S)$, where $\Gamma$ is a 3D point in the camera coordinate system and
$S$ is a parametrization of the 2D curve, to the image curve it projects to,
$\gama(s)$, where $\gama$ is an image point and $s$ is a parametrization of the
3D curve. Using the relation $\Gamma(S) = \rho(s) \gama(S)$, where $\rho$ is the
depth of point of $\Gama$, the differential geometry of the 3D curve $\{
\boldsymbol{T},\boldsymbol{N},\boldsymbol{B}, K, \dot{K},\tau, G,G',G''\}$ is
related to the differential geometry of the curve $\{\boldsymbol{\gamma},
\boldsymbol{t}, \boldsymbol{n}, \kappa, \dot{\kappa}, g, g', g'',\rho,
\rho',\rho'',\rho'''\}$, where
$\{\boldsymbol{T},\boldsymbol{N},\boldsymbol{B}\}$ is the Frenet frame of the 3D
curve, \textit{i.e.}, the unit tangent, normal, and binormal, $(\boldsymbol{t},
\boldsymbol{n})$ is the Frenet frame of the 2D curve, \textit{i.e.,} the unit
tangent and normal, $K$ and $\tau$ are the curvature and torsion of the space
curve, respectively, $k$ is the curvature of the image curve, $G$ and $g$ are
the speed of parameterization of the 3D and 2D curves, respectively, and where
`` $'$ " and `` $\cdot$ " denote differentiation with respect to an arbitrary
spatial parameter ($S$ or $s$) or arc-length parametrization, respectively. Note
that $\dot{k}$ and $\dot{K}$ are intrinsic quantities. The interesting
observation is that differential quantities of each order in 3D are related only
to the same order or less in 2D as proved in~\cite{fabbri2016multiview}. For
example, the space curve tangent can be written as
$\boldsymbol{T}=\rho'\boldsymbol{\gamma}+\rho g \boldsymbol{t}$, while the image
curve tangent is $\boldsymbol{t}=\frac{\boldsymbol{T}-e^T_3\boldsymbol{T}
\boldsymbol{\gamma}}{||\boldsymbol{T}-e^T_3\boldsymbol{T}
\boldsymbol{\gamma}||}$,  where $e_3^T=(0,0,1)$, and that the ratio of speeds of
parameterization is an intrinsic quantity
$\frac{g}{G}=\frac{||\boldsymbol{T}-e^T_3\boldsymbol{T}
\boldsymbol{\gamma}||}{e^T_3\boldsymbol{T}}$.

These relationships are very important for relating three or more views or for
reconstructing a scene:  We showed how differential geometry properties in two
views (tangent, curvature, curvature derivatives) reconstruct differential
geometry properties in 3D (3D tangent, curvature, torsion), as well
reconstructing the differential geometry properties in another view (third view
tangent, curvature, curvature derivative), Figure~\ref{fig:WW1}. We also showed
how the differential properties of a deforming (non-stationary) curve related to
the differential properties of the deforming projected curve, \textit{e.g.,} for
the contour generators of an occluding contour as view changes. When the 3D
curve is stationary (non-deforming), it constrains the projected curves in
multiple views. In this proposal we mainly focus on using first-order properties
(tangent), as a first step, since the use of higher-order derivatives requires
very careful numerical considerations, as shown possible in the successful use
of third-order orientation estimation in~\cite{kimia2018differential}, but for
now we only plan to use a coarse discretization of curvature as a way of pruning
possible matches.

\begin{figure}[h]
    \centering
    (a)\includegraphics[width=0.29 \linewidth]{figs/FigureWW1/image51.png}
    (b)\includegraphics[width=0.29 \linewidth]{figs/FigureWW1/image211.png}
    (c)\includegraphics[width=0.29 \linewidth]{figs/FigureWW1/image18.png}
\caption{The differential geometry of a 3D curve and its projections are related, e.g., tangents in two views reconstruct tangents in space and therefore tangents in other views.}
    \label{fig:WW1}
    \vspace{-0.2cm}
\end{figure}
A key accomplishment of this framework is the extraction of a 3D curve drawing
when many calibrated views of a scene with known pose are available. Briefly,
each curve segment in one view (anchor view) seeks corresponding portions of
curve segments in some other view (hypothesis view) to hypothesize a 3D curve
segment, which then seeks confirmation by reprojecting in other views
(confirmation views). This results in an unorganized set of 3D curve segments,
referred to as a "3D curve
sketch"~\cite{fabbri2011multiview,fabbri2016multiview}, Figure~\ref{fig:XX1}(c).
A 3D curve sketch suffers from erroneous grouping and gaps, and is highly
redundant due to the rotating assignment of anchor/hypothesis/confirmation
views, which prompted~\cite{usumezbas2016multiview} to use topological
connectivity to produce a connected set of long curve segments, referred to as a
"3D curve drawing", Figure~\ref{fig:XX1} (d).

\begin{itemize}
\item solver, curves
\end{itemize}

\begin{figure*}
  \begin{center}
    \includegraphics[width=\linewidth]{figs/mega-system-drawing-pt.pdf}
    \includegraphics[width=\linewidth]{figs/lofting-pipeline.png}
  \end{center}
%  \ReduceBeforeCaptionfigspace
  \caption{A visual illustration of our dense surface reconstruction pipeline.
  }
%  \ReduceAfterCaptionfigspace
  \label{fig:lofting:pipeline}
\end{figure*}

\section{Objectives}


\section{Aprendizagem de caminhos em \emph{solvers} por continuação homotópica}

\section{Geometria trifocal de curvas curvas: de local a global}

\texttt{To be
elaborated on\dots}\\ The dynamic curve fragment gives a set of corresponding
curves $C_f$,
$f=1, 2, ...,, F$ in $F$ frames. Let $\alpha(\xi)$ be the
$n$-fold alignment curve such that
\[
\alpha (\xi)= (s_1(\xi), s_2(\xi), ....., s_F(\xi)), \quad\quad \xi\in[0,1],
\]
such that the points $\{C_1(s_1(\xi)), C_2(s_2(\xi)), ....., C_F(s_F(\xi))\}$ are in
correspondence. We also use the notation $\alpha_{ij}(\xi) = \left(
s_i(\xi),s_j(\xi) \right)$ to denote an alignment between curve fragments $i$
and $j$. Observe that given the alignment between any two fragments
$\alpha_{ij}$, we can reconstruct the epipolar
geometry, since $\xi\in[0,1]$ generates numerous corresponding pairs of points
(more than seven), \ie, $\xi_1,\xi_2,\dots,\xi_7$ gives the seven corresponding
pairs of points $\left( C_1(s_1(\xi_i)),\,C_2(s_2(\xi_i)) \right)$,
$i=1,2,\dots,7$. However, this can be viewed in differential form: let $\xi_2 =
\xi_1 + \Delta\xi$ and let $\Delta\xi \to 0$. Then, the correspondences $\left( C_1(s_1(\xi_1)),\,C_2(s_2(\xi_1)) \right)$
and $\left( C_1(s_1(\xi_2)),\,C_2(s_2(\xi_2)) \right)$ in the limit are
equivalent to the correspondence $\left( C_1(s_1(\xi_1)),\,C_2(s_2(\xi_1)) \right)$
and the correspondence in
unit tangents $(\t_1(s_1(\xi_1)),\,\t_2(s_2(\xi_1))$. The same holds for $k$ and
$k_s$ \texttt{[Ric: spell out]}. Also, this dependency can be written explicitly
in terms of epipolar geometry and camera parameters \texttt{[Ric: do.]}

\begin{figure}
\centering
\includegraphics[scale=0.5]{figs/tri-alignment-eps-converted-to.pdf}
\caption{
Alignment curve between three views.
}
\label{fig:trialign}
\end{figure}

\paragraph{Ric: explore this and its degeneracies}. For three frames
$\alpha_{12}(\xi)= (s_1,s_2)$ and  $\alpha_{13}(\xi)= (s_1,s_3)$ gives
independent alignment between $(C_1, C_2)$ and $(C_1, C_3)$. However, is this
completely free of constraints between $(C_2,C_3)$? The alignment curve is not a
completely free curve in the monotonic space of curves: its dimension is
restricted so there must be constraint.\texttt{[Ric: lets discuss].}





\textbf{Multiview Local Consistency Network:}
The key idea underlying integration of reconstructions across views is the
detection of a common image structure supporting two reconstruction hypotheses. 
Two 3D local curve segments depict the same single underlying
3D object feature if they are supported by the same 2D image edge structures. 
Since the identification of common image structure can vary along the curve, it
must necessarily be a local process, operating at the level of a 3D local edge
and not a 3D curve. 
Two 3D edge elements (edgels) depict the same 3D structure if they 
receive support from the same 2D edgels in a sufficient number of views, so
3D-2D links between a 2D edgel to the 3D edgel it supports must be kept. Typically,
they share supporting image edges in many views; and the number of shared
supporting edgels is the measure of strength for a 3D-3D link between them.

Formally, we define the Multiview Local
geometric consistency Network (MLN) as pointwise alignments $\phi_{ij}$ between 
two 3D curves $\Gama_i$ and $\Gama_j$: let $\Gama_i(s_i)$ and $\Gama_j(s_j)$ be
two points in two 3D curves, and define
\begin{equation}
S_{ij} \doteq \{v : \gama^{i,v}(s_i) \text{ and } \gama^{j,v}(s_j) \text{ share local support}\}.
\end{equation}
Then the a kernel function $\phi$ defines a consistency link between these two points,
weighted by the extent of multiview image support $\phi_{ij}(s_i,s_j) \doteq
|S_{ij}|$. When the curves are sampled, $\phi$ becomes an adjacency matrix of a
graph representing links between individual curve samples.
The implementation goes through each image edgel which votes for a 3D curve
point that has received support from it (see the supplementary material for
details).

%\draftnote{cross check terminology w/ amir linking graphs}
%\draftnote{parametrized alignment to write integrals}
%\vspace{-0.3cm}
\begin{figure}
	%\captionsetup[subfigure]{labelformat=empty}
	\centering
	\begin{tabular}{cc}
%    \vspace{-0.3cm}
		\multirow{2}[2]{*}[20mm]{\includegraphics[width=0.75\linewidth]{figs/master-figure.png}} &
		\includegraphics[width=0.2\linewidth]{figs/cluster32-2.png}\\
		&
		\includegraphics[width=0.2\linewidth]{figs/cluster32-corr2.png}
	\end{tabular}
  \vspace{2em}
	\caption{The four bottlenecks of
		Fig.~\ref{fig:issues:remaining} are resolved by integration of
		information/cues from all views. (a) The shared supporting edges, which are marked with circles, create the purple links between the corresponding samples of the 3D curves. These purple bonds will then be used to pull the redundant segments together and reorganize the 3D model into a clean 3D graph. Observe how the determination of common	image support can identify portions of the green and blue curves as identical	while differentiating the red one as distinct. A real example for a bundle of related curves is shown in (b) and the links among their edges in (c).
	}
	%   based on which 3D information with a
	%   common cause can be integrated, leading to a four-stage process of $(i)$
	%   establishing the links as pictured above, $(ii)$ identifying portions of 3D
	%   curves which arise from the same source, Fig~\ref{fig:overlap:masks}, $(iii)$
	%   precise localization for 3D curves with a common cause,
	%   Fig~\ref{fig:graph:organization}a, (iv) Topological merging of these
	%   segments, leading to a topological graph of 3D curve segments,
	%   Fig~\ref{fig:graph:organization}e.}\label{fig:master:figure}
\end{figure}

%\vspace{-0.3cm}

\textbf{Multiview Curve-level Consistency Network:}
The identification of 3D edges sharing 2D edges leads to
high recall operating point with many false links due to accidental alignment of
edge support. False positives can be reduced without affecting high
recall by employing a notion of curve context for each 3D edgel: a link
between two 3D edgels based on a supporting 2D edgel is more effective if
the respective neighbors of the underlying 3D edge on the underlying 3D curve
are also linked. 

The curve context idea requires establishing new pairwise links between 3D
curves using MLN, when there are a sufficient number of links with
$\phi_{ij}>\tau_{\epsilon}$ between their constituent 3D edges (in our
implementation, $\tau_{\epsilon}=3$ and we require 5 such edges or more). The
linking of 3D curves is represented by the Multiview Curve-level Consistency
network (MCCN), a graph whose nodes are the 3D curves $\Gama_j$ and the edges
represent the presence of high-weight 3D edge links between these 3D curves. The
\mccn graph allows for a clustering of 3D curves by finding connected
components; and once a link is established between two curves, there is a high
likelihood of their edges corresponding in a regularized fashion, thus
fewer common supporting 2D edges are required to establish a link between all
their constituent 3D edges. This fact is used to perform gap filling, since even
no edge support is acceptable to fill in small gaps and create a continuous and
regularized correspondence if both neighbors of the gap are connected (see
pseudocode in Supplementary Materials for details). The two stages in
tandem, \ie, high recall linking of 3D edges and use of curve context to reduce
false positives leads to high recall and high precision, \textit{i.e.}, all the
3D edges which need to be related are related and very few outlier connections
remain.

\begin{figure}
	\captionsetup[subfigure]{labelformat=empty}
	\centering
	\begin{tabular}{cc}
		\multirow{2}[2]{*}[13mm]{\includegraphics[width=0.55\linewidth]{figs/need-for-clusters.png}} &
		\includegraphics[width=0.45\linewidth]{figs/cluster7.png}\\
		&
		\includegraphics[width=0.45\linewidth]{figs/cluster7-corr.png}
		\\
	\end{tabular}
	%\ReduceBeforeCaptionfigspace
	\caption{\small 
		The correspondence between 3D edge samples is skewed along a curve, a direct indication that these links cannot be used as-is when averaging and fusing redundant curve reconstructions. Instead, each point is assumed to be in correspondence with the point closest to it on another overlapping curve, during the iterative averaging step. Observe that corrections can be partial along related
		curves.
	}
	\label{fig:overlap:masks}
\end{figure}

%\vspace{-0.3cm}

%The links between two 3D curves that are consistently overlapping according to
%evidence from multiple views form the so-called Multiview Curve-level
%Consistency Network, a graph defined as follows.
%\begin{definition}
%The Multiview Curve-level Consistency Network (MCCN) is a graph 
%\begin{equation}
%\text{\textit{MCCN}} = (S, L),
%\end{equation}
%where the vertices $S = \{1,\dots,K\}$ encode the set of 3D curves
%$\{\Gama_1,\dots,\Gama_K\}$ and $L$ is the link set defined below.
%\end{definition}
%\begin{definition}
%Let the set of so-called strong local links between curves $\Gama_i$ and
%$\Gama_j$ be defined as
%\begin{equation}
%S_{ij} \doteq \{(s,t) : \phi_{ij}(s,t) \geq \tau_{s}, \phi_{ij} \in
%\text{MLN}(\Gama_1,\dots,\Gama_K) \}.
%\end{equation}
%Then the set $L$ of the MCCN is defined as
%\begin{equation}
%L = \{(i,j) : |S_{ij}| \geq \tau_{sl}\}.
%\end{equation}
%\end{definition}
%\indraftnote{We can formulate L as an integral over alignment parameter, see
%rics notes}

%We cluster the 3D curves by computing the connected components of their MCCN.
%We then go back to local correspondences by filling-in short correspondence gaps
%of the MLN induced by the confidence gained by the curve-level consistency link.
%Further details are available in the form of a pseudocode in supplementary material.


%in this way, the set of these primitives is not an
%arbitrary heuristic but rather is a complete set of basic operations capable of
%breaking any merging problem into smaller chunks.

%\vspace{-0.8cm}

\subsection{Other objectives}
\begin{itemize}
\item Help with the book to be published
\item Take part in helping teach a graduate-level course.
\end{itemize}

\paragraph{Impact}

\section{Justificativa: as vantagens das curvas.}
Além de possibilitarem as inúmeras aplicações do sistema proposto citadas no início da
Introdução, as curvas como \emph{features} básicas para reconstrução 3D e
calibração têm as seguintes vantagens.  As curvas provenientes de
descontinuidade de bordas nas imagens são mais densas e mais bem-estruturadas do
que pontos isolados, e representam eficientemente a imagem ou cena 3D
subjacente. Elas fornecem um bom compromisso entre uma representação altamente
redundante na forma de arrays de píxels, e uma representação altamente esparsa
das nuvens de pontos de interesse. Isso permite o cálculo rápido de
reconstruções 3D (os \emph{3D curve sketch}), que, apesar de não possuirem
superfícies explícitas, são ainda reconhecíveis, estruturadas, e de eficiente
manipulação e armazenagem. Essa efficiência representacional é evidenciada em
uma tendência recente em computação gráfica de usar renderizações baseadas em
curvas (\emph{line-based} rendering) para aplicações de internet que exigem
eficiência, e também por razões estéticas. A riqueza estrutural de curvas é
illustrada pelo fato de ser impossível registrar uma nova imagem não-calibrada
com relação a uma nuvem de pontos 3D por si só, ao passo que essa tarefa se
torna possível com curvas 3D dada a maior estruturação geométrica (\eg,
reprojetando-se as curvas 3D na nova imagem e alinhando-as às curvas detectadas
na imagem). Ademais, é bem sabido que representações basedas em bordas
representam eficiente o conteúdo de uma imagem, o que motiva uma reconstrução de
curvas 3D eficiente para armazenar a informação geométrica mais relevante de uma
cena 3D. Curvas também têm maior invariância do que pontos de interesse a
mudanças de iluminação, são mais estáveis sob uma maior separação entre as
imagens, e são mais precisamente localizadas na direção normal. Ademais,
estrutura de curvas de bordas em uma imagem é correlacionada com propriedades
das superfícies subjacentes: curvas estacionárias (como as de reflectância) são
condições de contorno para reconstrução de superfícies, e a variação de
contornos de oclusão sob diferentes pontos de vista indica a curvatura da
superfície

\paragraph{Impacto tecnológico.} curve-based multiview reconstruct has broad
impacts in applications working with scenes that are largely textureless, as
frequently occurring in indoor environments, {\em e.g.}, the Hololens project at
Microsoft~\cite{nurutdinova2015towards}.  


\section{Metas}
\paragraph{Elaboração de Publicações}
Como metas específica deste projeto, tem-se a elaboração de
publicações (idealmente 1 por ano) nas principais revistas e conferências da área. Dentre as
revistas visadas, temos: International
Journal of Computer Vision, IEEE Pattern Analysis and Machine Intelligence, IEEE
Transactions in Image Processing, Pattern Recognition, ACM Computing Surveys, e
Journal of Mathematical Imaging and Vision. Também pretende-se enviar trabalhos
completos (arigos) às mais importantes conferências na área, a saber: IEEE CVPR
(Computer Vision and Pattern Recognition), IEEE ECCV (European Conference in
Computer Vision), IEEE ICCV (International Conference in Computer Vision),  ACM
SIGGRAPH, e o IEEE SIBIGRAPI.


\section{Methodologia}
A execução do projeto será dividida nas seguintes frentes, visando atingir as
metas descritas na seção anterior, na ordem descrita na próxima seção:
\begin{itemize}
\item \textbf{Desenvolvimento do sistema 3D Curve Sketch.} Esta frente de
atuação involve a implementação de diversos aspectos do sistema, de forma a melhorar  
sua automação, conveniência e flexibilidade quanto ao tipo de cena. O método de
auto-calibração trifocal a ser desenvolvido será usado como núcleo para a calibração automática
tanto incremental como global de de milhares de câmeras. Aqui, também,
pretende-se iniciar a reconstrução 3D de superfícies.
\item \textbf{Solução do problema de auto-calibração trifocal.} Isto será
crucial como primeiro passo para permitir que a calibração do sistema se dê de
maneira automática, conveniente e flexível. Esta etapa involve um
desenvolvimento de algoritmo a partir de uma teoria clara de geometria algébrica
de diferencial, a ser desenvolvida em conjunto com o matemático Peter J.\ Giblin
da Universidade de Liverpool.
\item \textbf{Estudo de Geometria Algébrica.} Pretende-se estudar a solução de
sistemas de equações algébricas de maneira aprofundada, para auxiliar no item
anterior. Esta etapa também contará com reuniões com o matemático Peter J.\
Giblin.
\item \textbf{Validação e Experimentos de Larga escala.} Pretende-se realizar
experimentos na reconstrução em larga escala de objetos industriais 
partir de milhares de fotografias ou quadros de vídeo. A validação será
realizada através de comparaçao com objetos conhecidos \emph{a priori}
e impressos em impressoras 3D.  
\item \textbf{Desenvolvimento de Software livre para Visão Computacional.}
Pretende-se continuar o desenvolvimento de software livre, como uma
forma de contribuir para a sociedade, angariar colaborações,
garantir um controle de qualidade, e disseminar a pesquisa. 
\item Elaboração de Publicações como descrito nas metas.
\end{itemize}

\section{Expected Results}
\begin{itemize}
\item A module in the 3D curve drawing pipeline to better select views for
  reconstruction, based on the reconstruction that has already been performed
\item A module for merging 3D surface patches based on multiview information.
\end{itemize}

%\begin{center}
%\begin{tabular} {||r|c|c|c|c||}
%\hline
%\textbf{Stages (trimesters)} & 1 & 2 & 3 & 4 \\
%\hline
%Reproduce 3D Curve Sketch System& X &  & & \\
%\hline
%Reproduce 3D Curve Drawing System& X & X & & \\
%\hline
%Reproduce 3D Lofting System &   & X &  & \\
%\hline
%Build graphs for surface merging& X & X & X & \\
%\hline
%Large scale expermients&   &   & & X\\
%\hline
%Write Software & X & X & X & X\\
%\hline
%Publish Open Source Software &  &  & X & X \\
%\hline
%Publications &  & X & X& X\\
%\hline
%\end{tabular}
%\end{center}

\section{Cronograma das Atividades}
A tabela abaixo mostra o cronograma para as principais frentes de atuação descritas na
seção anterior. Para a execução deste projeto, o período foi dividido em etapas aproximadamente
anuais.
\begin{center}
\begin{tabular} {||r|c|c|c|c||}
\hline
\textbf{Etapas anuais do doutorado} & 2 & 3 & 4 \\
\hline
Sistema 3D Curve Sketch &   X & X & X \\
\hline
Auto-calibração Trifocal & X & X  & \\
\hline
Estudo de Mapas de Difusão &  X &   &  \\
\hline
Experimentos de Larga Escala &     & X & X\\
\hline
Escrita de Software Livre &   X & X & X\\
\hline
Elaboração de Publicações &   X & X & X\\
\hline
\end{tabular}
\end{center}

\section{Conclusão}
Este projeto propõe o desenvolvimento da tecnologia computacional necessária para um novo
paradigma baseado em curvas e superfícies para reconstrução 3D e calibração, complementando as
presentes técnicas baseadas em pontos, as quais estão sendo usadas em larga
escala. As curvas 3D reconstruídas, além de serem diretamente úteis, também
serão usadas como uma armação sobre a qual secções de superfícies serão
reconstruídas. A tecnologia proposta extenderá a capacidade das técnicas atuais,
permitindo o processamento de uma maior variedade de objetos de interesse
industrial, ao mesmo tempo
impondo menos restrições na aquisição. Ademais, a estrutura geométrica
intermediária das curvas -- o 3D \emph{curve sketch} -- fornece mais potencial
em aplicações do que as simples nuvens de pontos, ja sendo suficientes para tarefas
de reconhecimento e registro de imagens, dentre outras.



\nocite{Fabbri:2002}
\addcontentsline{toc}{section}{Refer\^{e}ncias}
\bibliographystyle{ieeetr}
\bibliography{personal,strings,shading,multiview,motion,Kimia,catagorization,edge-linking,deformable,medical,graphics,active-contours,texture,imaging,tracking,shape-papers,bib-header,video,math-books,math,psych-books,metric,edge,leymarie_pami_scaffold,vision-books,vision,nn-search,multidimscaling,psychophysics,indexing,segmentation,image-databases,shape-matching,neuro,skeleton,skeleton2D,aspect-graphs,recognition,surface-networks,ridge,proceedings,perceptual-grouping,continuation,graph-matching-2,cooper}
%\input{paper.bbl}
%
% Assinaturas:
%\newpage
%\ \\\vspace{7cm}
%\center $\overline{\ \ \ Ricardo\ Fabbri\ \ \ }$
%\ \\\vspace{4cm}
%\center $\overline{\ \ \ Luciano\ da\ Fontoura\ Costa\ \ \ }$
\end{document}
